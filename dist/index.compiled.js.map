{"version":3,"sources":["webpack:///webpack/bootstrap cc4bee010c661a08de49","webpack:///./index.js","webpack:///./src/controller.js","webpack:///./src/Game.js","webpack:///./src/Player.js","webpack:///./src/Deck.js","webpack:///./src/Card.js","webpack:///./src/Bank.js","webpack:///./src/Dealer.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;ACnCA;;AAEA;AACA;AACA;AACA,mCAAkC;AAClC,IAAG;AACH,EAAC;;;;;;;ACVD;AACA;AACA;AACA;AACA,gD;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,gBAAgB;AAChC,qBAAoB,qBAAqB;AACzC;AACA;AACA;;AAEA,6DAA4D,gBAAgB;AAC5E;AACA;AACA;AACA;AACA;AACA,wBAAuB,oCAAoC;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB,OAAO,E;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,iD;;AAEA;AACA;;AAEA;AACA;AACA,sDAAqD,kBAAkB;AACvE,qBAAoB,qBAAqB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,a;AACA;AACA;AACA;;AAEA,qDAAoD,kBAAkB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA,Q;AACA;AACA;AACA,kEAAiE,aAAa;AAC9E,wEAAuE,mBAAmB;AAC1F;AACA,6B;;;;;;ACvGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,qBAAqB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK,E;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB;AACnB,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mC;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,uB;;;;;;ACtGA;AACA;AACA,mBAAkB;AAClB;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,QAAQ;AACpB,aAAY,cAAc;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,iBAAiB;AAC/D;AACA,oBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,yB;;;;;;ACjFA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAmC;AACnC,kB;AACA,sB;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB,kBAAkB;AACrC,qBAAoB,kBAAkB;AACtC,kD;AACA;AACA;AACA;AACA;AACA,qC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;;;;;;;ACxCA;AACA;AACA;AACA;;AAEA,uB;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;;;;;;;ACzBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,e;;AAEA;AACA;AACA;AACA;AACA;AACA,yB","file":"index.compiled.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap cc4bee010c661a08de49\n **/","\r\n \r\n\r\n/*** Index File  Blackjack By Sawyer McBride ****/\r\n\r\n(function() {\r\n  var Controller = require('./src/controller');\r\n  document.addEventListener('DOMContentLoaded', function() {\r\n    new Controller().initEvents(); //register the rest of the events after\r\n  });\r\n})();\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./index.js\n ** module id = 0\n ** module chunks = 0\n **/","var Game = require('./Game');\r\nvar $ = function(elem) {\r\n  // return document.querySelector(elem);\r\n  var found = document.querySelectorAll(elem);\r\n  return found.length === 1 ? found[0] : found;  \r\n}\r\n\r\nfunction Controller( mountNode ) {\r\n  this.mountNode = mountNode;\r\n\r\n}\r\nController.prototype.renderDeck = function() {\r\n  \r\n  var deckCardTemplate = $('#card-template-deck').innerHTML;\r\n  var deckLength = this.Game1.deckLength();\r\n  \r\n  var top = 5;\r\n  var left = 5;\r\n  var cardsArr = [];\r\n  for(var i = 0; i < deckLength; i++) {\r\n    cardsArr.push( {left: left, top: top} );\r\n    ++top;\r\n    left+=2;\r\n  }\r\n  \r\n  $('.deck').innerHTML = Mustache.render(deckCardTemplate, {cards: cardsArr});\r\n}\r\nController.prototype.start = function() {\r\n  this.Game1 = new Game(1);\r\n  this.Game1.start();\r\n  this.renderDeck();\r\n  this.renderButtons( {hit:0, stay: 0, double: 0, split: 0} );\r\n}\r\nController.prototype.renderButtons = function( obj ) {\r\n  var buttonsTemplate = $('#buttons-template').innerHTML;\r\n  var data = {\r\n    hit: typeof obj.hit === 'undefined' ? '' : 'disabled',\r\n    stay: typeof obj.stay === 'undefined' ? '' : 'disabled',\r\n    double: typeof obj.double === 'undefined' ? '' : 'disabled',\r\n    deal: typeof obj.deal === 'undefined' ? '' : 'disabled',\r\n    split: typeof obj.split === 'undefined' ? '' : 'disabled',\r\n  }\r\n  $('section.buttons').innerHTML = Mustache.render(buttonsTemplate, data);\r\n}\r\nController.prototype.dealEvt = function() {\r\n  this.Game1.deal();\r\n  this.renderDeck();\r\n  this.renderButtons({deal:0});   \r\n}\r\nController.prototype.initEvents = function() {\r\n  //lots of events\r\n  this.start();\r\n  this.evtDynamicClk('.buttons', 'deal-btn', this.dealEvt.bind(this));\r\n  this.evtDynamicClk('.buttons', 'hit-btn', this.hit.bind(this));\r\n  \r\n}\r\nController.prototype.hitEvt = function() {\r\n  this.Game1.hitPlayer(1);\r\n}\r\nController.prototype.stayEvt = function() {\r\n  console.log(this);\r\n}\r\nController.prototype.evtDynamicClk= function(parent, id, cb) {\r\n  $(parent).addEventListener('click', function(e) {\r\n    if(e.target.id === id) {\r\n      cb();\r\n    }\r\n  });\r\n}\r\nController.prototype.renderCards = function( ) { \r\n  \r\n  var cardTemplate = $('#card-template').innerHTML;\r\n  var dealerCardTemplate = $('#dealer-card-template').innerHTML;\r\n  \r\n  var cards = [];\r\n  var dealerCards = [];\r\n  for(var i = 0, hands = this.Game1.players[0].hands; i < hands.length; i++) {\r\n      for(var j = 0; j < hands[i].length; j++) {\r\n        cards.push(\r\n          {\r\n            front: true,\r\n            back: false,\r\n            color: hands[i][j].suit  === 'H' || hands[i][j].suit  === 'D' ? 'red' : 'black',\r\n            suit:  hands[i][j].suit,\r\n            rank: hands[i][j].rank\r\n           } \r\n        )\r\n      }\r\n  }\r\n  \r\n  for(var x = 0, dHand = this.Game1.dealer.hands[0]; x < dHand.length; x++) {\r\n    dealerCards.push(\r\n      {\r\n        show: x === 0, \r\n        color: dHand[x].suit  === 'H' || dHand[x].suit  === 'D' ? 'red' : 'black',\r\n        suit:  dHand[x].suit,\r\n        rank: dHand[x].rank\r\n      } \r\n    )\r\n  }\r\n  $('section.player').innerHTML = Mustache.render(cardTemplate, {cards: cards});\r\n  $('section.dealer').innerHTML = Mustache.render(dealerCardTemplate, {cards: dealerCards});\r\n}\r\nmodule.exports = Controller;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/controller.js\n ** module id = 1\n ** module chunks = 0\n **/","var Player = require('./Player');\r\nvar Bank = require('./Bank');\r\nvar Dealer = require('./Dealer');\r\nvar Deck = require('./Deck');\r\n\r\nfunction Game(numPlayers) {\r\n  this.players = [];\r\n  this.numPlayers = numPlayers;\r\n  this.dealer = null;\r\n  this.bank = null;\r\n}\r\nGame.prototype.start = function() {\r\n  this.dealer = new Dealer();\r\n  this.bank = Bank;\r\n  for(var i = 0; i < this.numPlayers; i++) {\r\n    this.players.push(new Player());\r\n  }\r\n  Deck.shuffle();\r\n}\r\n/**\r\n * 4/11/16 12:15AM\r\n * TODO\r\n * - return cards to used deck after finish\r\n * -Deal cards to each player at beggining\r\n * - Set bet for each player\r\n */\r\nGame.prototype.deal = function() {\r\n  if(this.deckLength() < numPlayers*2+2)\r\n    Deck.shuffle(true);\r\n\r\n  this.players.forEach( function(player) {\r\n    player.deal();\r\n  });\r\n  this.dealer.deal();\r\n}\r\nGame.prototype.makeBet = function(id, value) {\r\n  this.players[id].makeBet(value);\r\n}\r\nGame.prototype.deckLength = function() {\r\n  return Deck.cards.length;\r\n}\r\nGame.prototype.finish = function() {\r\n  var dealerVal = this.dealer.resolveHand();\r\n  //everyone wins\r\n  if(dealerVal > 21) {\r\n    this.players.forEach( function(player) {\r\n      player.status = 1;\r\n    });\r\n  }\r\n  \r\n  this.players.forEach( function(player) {\r\n    var playerVal = player.getTotal();\r\n    if(playerVal > 21) {\r\n      player.status = 0;\r\n      return;\r\n    }\r\n    if(playerVal === 21 && player.hands[0].length === 2) {\r\n      player.blackjack = true;\r\n    }\r\n    \r\n    player.cards.forEach( function(hand) {\r\n      Deck.addUsedCards(hand);\r\n    });    \r\n    \r\n    if(playerVal === dealerVal) \r\n      player.status = 2;\r\n    else if(playerVal > dealerVal) //and they didn't bust ^ see above\r\n      playerVal = 1;\r\n    else if(playerVal < dealerVal)\r\n      player.status = 0;\r\n      \r\n    player.reset(); //sets bet and emptys hand \r\n  });\r\n  \r\n}\r\nGame.prototype.hitPlayer = function(id) {\r\n  if(this.deckLength() < numPlayers*2+2)\r\n    Deck.shuffle(true);\r\n  \r\n  if(this.deckLength() < numPlayers*2+2)\r\n    Deck.shuffle(true);\r\n  this.players[id].hit();\r\n}\r\nGame.prototype.getPlayerStatus = function(id) {\r\n  return this.players[id].status; //will return -1 if has not been set\r\n}\r\nGame.prototype.payout = function() {\r\n  this.players.forEach( function(player) {\r\n    switch (player.status) {\r\n      case 0:\r\n        player.bank-=player.bet;\r\n        break;\r\n      case 1:\r\n        if(player.blackjack) \r\n          player.bank += player.bet*1.25;\r\n        else \r\n          player.bank+=player.bet; \r\n    }\r\n    //restore bet at 0;\r\n    player.bet = 0;\r\n  });\r\n}\r\nmodule.exports = Game;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/Game.js\n ** module id = 2\n ** module chunks = 0\n **/","const Deck = require('./Deck');\r\nfunction Player(){\r\n    this.hands=[]; //TODO 2d array to hold split/ other hands\r\n    this.bank=0;\r\n    this.bet = 0;\r\n    this.status = -1; //0 is lost, 1 is won, 2 is push\r\n    this.blackjack = false;\r\n    this.canBet = true;\r\n}\r\nPlayer.prototype.deal = function() {\r\n  this.hands.push([Deck.pick(), Deck.pick()]);\r\n}\r\nPlayer.prototype.makeBet = function(value) {\r\n  if(this.canBet) {\r\n    this.bet = value\r\n    this.canBet = false;\r\n    return false;\r\n  }\r\n   else \r\n    return false;\r\n}\r\nPlayer.prototype.reset = function() {\r\n  this.hands = [];\r\n  this.bet = 0;\r\n}\r\nPlayer.prototype.handsLength = function() {\r\n  return this.hands.length;\r\n}\r\nPlayer.prototype.hit = function(handNum) {\r\n  var handToHit = handNum || 0;\r\n  this.hands[handToHit].push(Deck.pick());\r\n}\r\nPlayer.prototype.split = function(handNum) {\r\n  var handToSplit = handNum || 0;\r\n  if(this.hands[handToSplit][0].rank === this.hands[handToSplit][1].rank\r\n     && this.hands[handToSplit].length === 2) \r\n    this.hands.push([this.hands[handToSplit].splice(0,1)]);\r\n  else \r\n    return false;\r\n}\r\nPlayer.prototype.double = function(handNum) {\r\n  var handToDouble = handNum || 0;\r\n  if(this.hands[handToDouble].length !== 2)\r\n    return false;\r\n  this.bet*=2;\r\n  this.hit(handToDouble);\r\n}\r\n/**\r\n * Gets the total of a given hand\r\n * @param  {Integer} handNum\r\n * @return {Array<String>} an array of the rank for each card\r\n */\r\nPlayer.prototype.getTotal = function(handNum) {\r\n  var self = this;\r\n  function getVal(str) {\r\n    if(!isNaN(str))\r\n      return parseInt(str);\r\n    else {\r\n      if(str === 'K' || str === 'Q' || str === 'J')\r\n        return 10;\r\n      else if(str === 'A') {\r\n        return 11;\r\n      }\r\n    }\r\n  }\r\n  var totalHand = handNum || 0;\r\n  var total = 0;\r\n  var acesThisHand = 0;\r\n  for(var i = 0, hand = this.hands[totalHand]; i < hand.length; i++ ) {\r\n    if(hand[i].rank === 'A')\r\n    ++acesThisHand; //If an ace is in the hand increment the number of aces for the HAND\r\n    total+=getVal(hand[i].rank);\r\n  }\r\n  //ace handling\r\n  while(acesThisHand-->0 && total > 21) {\r\n    total-=10;\r\n  }\r\n  return total;\r\n}\r\n\r\n\r\nmodule.exports = Player;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/Player.js\n ** module id = 3\n ** module chunks = 0\n **/","/**\r\n * Deck Static Class\r\n * Properties: cards\r\n * Methods: shuffle, card,  \r\n */\r\nconst Card = require('./Card');\r\n\r\nvar Deck = (function() {\r\n  var ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'K', 'Q'];\r\n  var suits = ['H', 'S', 'C', 'D']; //Hearts, spades, clubs, diamonds\r\n  var cards = []; \r\n  var usedCards = []; \r\n  function shuffle(midReShuffle) {\r\n    if(midReShuffle) {\r\n      cards = usedCards.splice(0);\r\n      return;\r\n    }\r\n      \r\n    for (var i = 0; i < ranks.length; i++) {\r\n      for(var j = 0; j < suits.length; j++) {\r\n        cards.push(new Card(suits[j], ranks[i])); \r\n      }\r\n    }\r\n  }\r\n  function addUsedCards(arr) {\r\n    usedCards.push.apply(null, arr); \r\n  }\r\n  function pick() {\r\n    if (this.cards.length === 0) \r\n      return false;\r\n    return this.cards.splice(Math.floor(Math.random() * this.cards.length-1), 1)[0];\r\n  }\r\n  return {\r\n    pick: pick,\r\n    cards: cards,\r\n    shuffle:shuffle, \r\n    addUsedCards: addUsedCards\r\n  }\r\n})();\r\n\r\nmodule.exports = Deck;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/Deck.js\n ** module id = 4\n ** module chunks = 0\n **/","function Card (suit,rank){\r\n    this.suit=suit;\r\n    this.rank=rank;\r\n}\r\n\r\nmodule.exports = Card;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/Card.js\n ** module id = 5\n ** module chunks = 0\n **/","/**\r\n * Bank static class\r\n */\r\nvar Bank = (function() {\r\n  var set = false;\r\n  var amount = 1000;\r\n  function subtract (value) {\r\n    if(amount < value)\r\n      return false;\r\n    else {\r\n      amount-=value;\r\n      return value;\r\n    }\r\n  }\r\n  function init(value) {\r\n    if(!set)\r\n      amount = value\r\n    set = true;\r\n  }\r\n  return {\r\n    subtract: subtract,\r\n    init: init\r\n  }\r\n})();\r\n\r\nmodule.exports = Bank;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/Bank.js\n ** module id = 6\n ** module chunks = 0\n **/","const Player = require('./Player.js');\r\n\r\nfunction Dealer(){\r\n  //call super constructor\r\n  Player.call(this);\r\n  //the constructor will be set to the super (Player) so we restore\r\n  this.constructor = Dealer;\r\n}\r\n//Inheritance\r\nDealer.prototype = Object.create(Player.prototype);\r\n\r\nDealer.prototype.split = null;\r\nDealer.prototype.double = null;\r\n//auto hits the hand and returns the total \r\nDealer.prototype.resolveHand = function() {\r\n  //stay on soft 17\r\n  // if(this.getTotal() === 17 && this.acesCount() === 1)\r\n  //   return; \r\n  \r\n  while(this.getTotal() < 17) {\r\n    this.hit();\r\n  }\r\n  return this.getTotal();\r\n}\r\nmodule.exports = Dealer;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/Dealer.js\n ** module id = 7\n ** module chunks = 0\n **/"],"sourceRoot":""}